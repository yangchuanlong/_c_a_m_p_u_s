<!--index.wxml-->
<view class="container"  style="visibility: {{finishChecking ? '' : 'hidden'}}">
    <view class='searchWrapper'>
      <input confirm-type='search'
      bindinput='inputSearch'
      bindconfirm='startSearch'
      placeholder='请输入搜索内容'
      />
    </view>
    <scroll-view class='tabs' bindtap='onTabClick' scroll-into-view="{{toColumn}}" scroll-x>
        <view wx:for="{{tabs}}" class="{{activeTab == index ? 'active' : ''}}" data-tab-index='{{index}}' id="{{item.en_name}}" wx:key="tabTitle-{{item.en_name}}">
            {{item.name}}
        </view>
    </scroll-view>
   <view class="sectionWrapper" bindtouchstart="onTouchStart" bindtouchend="onTouchEnd">
       <view class="section" wx:for="{{tabs}}" style="display: {{activeTab == index ? '' : 'none'}}" id="{{item.en_name}}" wx:key="tabContent-{{index}}">
           <view wx:for="{{colQuestions[item.en_name] || []}}" class="item" wx:key="{{item._id}}" data-id="{{item._id}}" bindtap='gotoDetail'>
               <view class="author">
                   <image src="../images/anonymousUserImg.png" class="avatar" wx:if="{{item.anonymous}}"></image>
                   <image src="{{item.avatar  || '../images/userIcon.png'}}" class="avatar" wx:else></image>
                   <text class="nickName">{{item.anonymous ? "匿名" : item.nickName}}</text>
                   <text class="date">{{item.formattedTime}}</text>
               </view>
               <view class="title">{{item.title}}</view>
               <view class="shortContent">{{item.content}}</view>
               <view class="imagesWrapper" wx:if="{{item.images.length}}">
                   <image wx:for="{{item.images}}" wx:for-item="imgItem" wx:key="{{imgItem}}" src="{{imgItem}}"></image>
               </view>
               <view class='actions'>
                   <view>
                       <image wx:if="{{myThumbups[item._id]}}" src="../images/thumbup.png" id='js-thumbup-cancel'></image>
                       <image wx:else src="../images/not-thumbup.png" id='js-thumbup'></image>
                   </view>
                   <view> 赞({{thumbupCount[item._id] || 0}})</view>
                   <view>|</view>
                   <view>回答({{replyCount[item._id] || 0}})</view>
               </view>
           </view>
       </view>
   </view>

    <view class="icons">
        <image src="../images/icon.jpg" class="logo"></image>
        <image src="../images/edit.png" class="editIcon" bindtap='gotoAsk'></image>
        <image src="../images/userIcon.png" class="userIcon" bindtap='gotoMine'></image>
        <image src="../images/message.png" class="message" bindtap='gotoMsg'></image>
    </view>
    <view class='loading' style='display:{{showLoading ? "" : "none"}}'>
      <image src='../images/loading.gif'></image>
    </view>
    <view class="overlay" style="display: {{showOverlay ? '' : 'none'}}">
        <image src='../images/loading.gif'></image>
    </view>
    <view class="overlay interested" style="display: {{showInterestedSettingDlg ? '' : 'none'}}">
        <view class="dlg-wrapper">
            <view class="dlg-title">选择你想关注的话题</view>
            <view class="columns">
                <view class="column {{chosenInterestedCols[item.en_name] && 'chosen'}}"
                      wx:for="{{collegeColumns}}"
                      data-col="{{item.en_name}}"
                      bindtap="onChooseCol"
                >
                    <text>{{item.name}}</text>
                </view>
            </view>
            <button size="mini" type="primary" bindtap="setInterestedCols" loading="{{setInterestedLoading}}">完成</button>
        </view>
    </view>
</view>
